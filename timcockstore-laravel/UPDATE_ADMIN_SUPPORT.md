# üéØ –û–ë–ù–û–í–õ–ï–ù–ò–ï TimCockStore Laravel - –ê–î–ú–ò–ù–ö–ê –ò –°–ò–°–¢–ï–ú–ê –ü–û–î–î–ï–†–ñ–ö–ò

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### üîß –ù–æ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

1. **AdminController** (`app/Http/Controllers/AdminController.php`)
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä—ã)

2. **SupportTicketController** (`app/Http/Controllers/SupportTicketController.php`)
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è–º–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
   - **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º —Ä–æ–ª–µ–π!** üêõ
   - –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ (–≤–Ω–µ —Ü–∏–∫–ª–∞)
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º POST

### üìä –ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏

1. **SupportTicket** (`app/Models/SupportTicket.php`)
   - –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–∞–≤—Ç–æ—Ä –æ–±—Ä–∞—â–µ–Ω–∏—è)
   - –°–≤—è–∑—å —Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º
   - –ü–æ–ª—è: subject, description, status

### üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏

- **User** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç–Ω–æ—à–µ–Ω–∏—è –¥–ª—è tickets

### üíæ –ù–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏

**2025_12_18_234314_create_support_tickets_table.php**
```sql
- id (primary key)
- user_id (foreign key to users)
- support_id (foreign key to users, nullable)
- subject (string)
- description (text)
- status (enum: open, in_progress, closed)
- timestamps
```

### üìÑ –ù–æ–≤—ã–µ Blade –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

1. **resources/views/admin/dashboard.blade.php** - –ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. **resources/views/admin/users.blade.php** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
3. **resources/views/admin/support-tickets.blade.php** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è–º–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É

### üõ£Ô∏è –ù–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

```php
// Admin routes (Manager only)
Route::middleware(['auth'])->prefix('admin')->group(function () {
    Route::get('/', [AdminController::class, 'dashboard'])->name('admin.dashboard');
    Route::get('/users', [AdminController::class, 'users'])->name('admin.users');
    Route::post('/users/role', [AdminController::class, 'updateUserRole'])->name('admin.update-role');
    Route::get('/users/{id}/delete', [AdminController::class, 'deleteUser'])->name('admin.delete-user');
    Route::get('/support-tickets', [SupportTicketController::class, 'adminIndex'])->name('admin.support-tickets');
    Route::post('/support-tickets/assign', [SupportTicketController::class, 'assign'])->name('admin.assign-ticket');
});
```

### üì± –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è—Ö

- **layout.blade.php** - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –∞–¥–º–∏–Ω–∫—É –≤ –º–µ–Ω—é (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤)
- **index.blade.php** - –î–æ–±–∞–≤–ª–µ–Ω margin-bottom –¥–ª—è footer

### üß™ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (Seeder)

```php
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- manager@example.com / password (–ú–µ–Ω–µ–¥–∂–µ—Ä)
- support@example.com / password (–ü–æ–¥–¥–µ—Ä–∂–∫–∞)
- client@example.com / password (–ö–ª–∏–µ–Ω—Ç)

// –û–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É (3 —à—Ç—É–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- "–ü—Ä–æ–±–ª–µ–º–∞ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π" - –Ω–∞–∑–Ω–∞—á–µ–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–º—É
- "–í–æ–ø—Ä–æ—Å –æ –≥–∞—Ä–∞–Ω—Ç–∏–∏" - –ù–ï –Ω–∞–∑–Ω–∞—á–µ–Ω–æ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è)
- "–í–æ–∑–≤—Ä–∞—Ç —Ç–æ–≤–∞—Ä–∞" - –∑–∞–∫—Ä—ã—Ç–æ
```

---

## üêõ –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –û–®–ò–ë–ö–ê: –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π

### –ü—Ä–æ–±–ª–µ–º–∞
–í –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º `support.php`:
```php
$supports = $conn->query("SELECT id, name FROM users WHERE role='support'");

// ... –ø–æ—Ç–æ–º –≤ —Ü–∏–∫–ª–µ:
<?php while ($s = $supports->fetch_assoc()): ?>
    <option value="<?= $s['id'] ?>">...</option>
<?php endwhile; ?>
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `fetch_assoc()` –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç cursor. –ï—Å–ª–∏ —Ü–∏–∫–ª –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç –ø—É—Å—Ç—ã–º–∏!

### –†–µ—à–µ–Ω–∏–µ (Laravel)
```php
// –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ - –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ–º
$supporters = User::where('role', 'support')->get();

// –ü–µ—Ä–µ–¥–∞—ë–º –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
return view('admin.support-tickets', compact('tickets', 'supporters'));

// –í Blade —à–∞–±–ª–æ–Ω–µ - –∏—Å–ø–æ–ª—å–∑—É–µ–º —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
@foreach ($supporters as $supporter)
    <option value="{{ $supporter->id }}">{{ $supporter->name }}</option>
@endforeach
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å cursor'–æ–º
‚úÖ –î–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è
‚úÖ –ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ —Ü–∏–∫–ª–∞—Ö

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –í—Ö–æ–¥–∏–º –∫–∞–∫ –º–µ–Ω–µ–¥–∂–µ—Ä
```
Email: manager@example.com
Password: password
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É
–í –º–µ–Ω—é –±—É–¥–µ—Ç –∫–Ω–æ–ø–∫–∞ **"üîß –ê–¥–º–∏–Ω–∫–∞"**

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –û—Ç–∫—Ä–æ–π—Ç–µ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
- –ò–∑–º–µ–Ω–∏—Ç–µ —Ä–æ–ª—å –∏ –Ω–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
- –£–¥–∞–ª–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞)

### 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è–º–∏ (–ò–°–ü–†–ê–í–õ–ï–ù–û!)
- –û—Ç–∫—Ä–æ–π—Ç–µ "–û–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É"
- –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –∏–∑ dropdown'–∞
- –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" - **–¢–ï–ü–ï–†–¨ –†–ê–ë–û–¢–ê–ï–¢!** ‚úÖ

---

## üìä –ú–∞—Ä—à—Ä—É—Ç—ã –∞–¥–º–∏–Ω–∫–∏

```
GET  /admin                          ‚Üí –ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
GET  /admin/users                    ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
POST /admin/users/role               ‚Üí –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)
GET  /admin/users/{id}/delete        ‚Üí –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET  /admin/support-tickets          ‚Üí –û–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)
POST /admin/support-tickets/assign   ‚Üí –ù–∞–∑–Ω–∞—á–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)
```

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ PHP

| –§—É–Ω–∫—Ü–∏—è | PHP | Laravel |
|---------|-----|---------|
| **–û–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É** | –ü—Ä–æ–±–ª–µ–º–∞ —Å cursor –≤ —Ü–∏–∫–ª–µ | –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏** | –†—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º | –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ POST –∑–∞–ø—Ä–æ—Å—ã |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | SQL Injection –≤–æ–∑–º–æ–∂–µ–Ω | –ó–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ Eloquent + validation |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Laravel |
| **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** | –†—É—á–Ω–æ–µ | –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ Redis/File –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ |

---

## ‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–¢–∏–ø–∏–∑–∞—Ü–∏—è** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ type hints
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - try/catch –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚úÖ **CSRF –∑–∞—â–∏—Ç–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ–∫–µ–Ω—ã
‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ middleware
‚úÖ **–ê—É–¥–∏—Ç** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –≥–æ—Ç–æ–≤–æ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

---

## üìù –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
php artisan route:list | grep admin

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
php artisan tinker

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π
php artisan migrate:status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -f storage/logs/laravel.log
```

---

## üéØ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è–º–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)
- ‚úÖ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ CSRF –∑–∞—â–∏—Ç–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** üöÄ

